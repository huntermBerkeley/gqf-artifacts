% !TEX root =  main.tex

\newcommand{\figwidth}{0.49\textwidth}

\pgfplotsset{
  InstanPlot/.style={
    small,
    width = \linewidth + 15pt,
    height=0.7\linewidth,
    xlabel={Load factor},
    ylabel={Throughput (Billion/s)},
    xlabel near ticks,
    x label style={at={(0.5,-0.12)},font=\small},
    scaled y ticks = base 10:-3,
    ylabel near ticks,
    y label style={at={(-0.1,0.5)},font=\small},
    ytick style={draw=none},
    ytick scale label code/.code = {},
    yticklabel style={ /pgf/number format/fixed },
    ymajorgrids,
    yminorgrids,
    ymin=0,
    minor tick num=1,
    minor grid style={draw=gray!25},
  },
}

\pgfplotsset{
  AggregatePlot/.style={
    small,
    width = \linewidth + 15pt,
    height=0.75\linewidth,
    xlabel={Filter Size ($2^x$)},
    ylabel={Throughput (Billion/s)},
    xlabel near ticks,
    x label style={at={(0.5,-0.12)},font=\small},
    scaled y ticks = base 10:-3,
    ylabel near ticks,
    y label style={at={(-0.1,0.5)},font=\small},
    ytick style={draw=none},
    ytick scale label code/.code = {},
    yticklabel style={ /pgf/number format/fixed },
    ymajorgrids,
    yminorgrids,
    ymin=0,
    minor tick num=1,
    minor grid style={draw=gray!25},
  },
}

\pgfplotsset{
  DeletePlot/.style={
    small,
    width = \linewidth + 10pt,
    height=0.60\linewidth,
    xlabel={Filter Size},
    ylabel={Throughput (Billion/s)},
    xlabel near ticks,
    x label style={at={(0.5,-0.12)},font=\small},
    scaled y ticks = base 10:-3,
    ylabel near ticks,
    y label style={at={(-0.1,0.5)},font=\small},
    ytick style={draw=none},
    ytick scale label code/.code = {},
   % ymode=log,
    %log basis y={2},
    yticklabel style={ /pgf/number format/fixed },
    ymajorgrids,
    yminorgrids,
    ymin=0,
    minor tick num=1,
    minor grid style={draw=gray!25},
  },
}

\pgfplotsset{
  HistoPlot/.style={
    footnotesize,
    ybar = 1pt,
    bar width = 3.5pt,
    width = \linewidth + 30pt,
    height = 1.8in,
    ymin = 0,
    xmin = 100,
    xmax = 20000,
    xtick=data,
    xticklabels={100\,\si{\nano\second}, 250\,\si{\nano\second}, 500\,\si{\nano\second}, 1\,\si{\micro\second}, 2.5\,\si{\micro\second}, 5\,\si{\micro\second}, 10\,\si{\micro\second}, >10\,\si{\micro\second}},
    x tick label style = {rotate = 45, anchor = 15, xshift = 2pt},
    ytick scale label code/.code = {},
    yticklabel style={
        /pgf/number format/fixed,
    },
    scaled y ticks = base 10:-6,
    enlarge x limits = 0.08,
    fill,
    no marks,
    nodes near coords,
    every node near coord/.append style={rotate = 90, anchor = west, font=\tiny,/pgf/number format/fixed relative,/pgf/number format/precision=2},
    nodes near coords={
       \pgfkeys{/pgf/fpu}%
       \pgfmathparse{\pgfplotspointmeta / 640000}%
       \pgfmathprintnumber{\pgfmathresult}\%
    },
  },
}

\pgfplotsset{
  MHMLFPlot/.style={
    ybar,
    bar width = 5.5,
    no marks,
    width=\columnwidth,
    height=0.6\columnwidth,
%    xlabel near ticks,
%    ylabel near ticks,
    ylabel ={Load Factor},
    ymin = 0,
    ymax = 1,
    symbolic x coords = {wa_gqf_32, wa_gqf_64, wa_nogqf_64, r_gqf_14, r_gqf_24, r_nogqf_24},
    xticklabels = {{}, WA \\GQF N32, WA \\GQF N64, WA \\NoGQF N64, Rhizo \\GQF N14, Rhizo \\GQF N24, Rhizo \\NoGQF N24},
    x tick label style = {font = \small, align = center, rotate = 50, anchor = north east},
    major x tick style = transparent,
    enlarge x limits = 0.2,
    ymajorgrids,
    yminorgrids,
    minor y tick num = 1,
    fill,
    nodes near coords,
    every node near coord/.append style =
    {   
      rotate = 90, 
      anchor = west,
      fill = white,
      outer sep = 0,
      inner sep = 1,
      xshift = 1pt,
      /pgf/number format/fixed,
      /pgf/number format/precision = 1,
      font=\scriptsize
    }   
  },  
}

\pgfplotsset{
  MHMMemPlot/.style={
    ybar stacked,
    bar width = 12,
    no marks,
    width=\columnwidth,
    height=0.6\columnwidth,
%    xlabel near ticks,
%    ylabel near ticks,
    ylabel ={Min memory required (GB)},
    ymin = 0,
    ymax = 2500,
    symbolic x coords = {wa_gqf, wa_nogqf, r_gqf, r_nogqf},
    xticklabels = {{}, WA \\GQF, WA \\NoGQF, Rhizo \\GQF, Rhizo \\NoGQF},
    x tick label style = {font = \small, align = right, rotate = 0, anchor = north east},
    major x tick style = transparent,
    enlarge x limits = 0.2,
    ymajorgrids,
    yminorgrids,
    minor y tick num = 1,
    fill,
    nodes near coords, 
    every node near coord/.append style =
    { 
      anchor = west,
      fill = white,
      outer sep = 0,
      inner sep = 1,
      /pgf/number format/fixed,
      /pgf/number format/precision = 1,
      font=\small
    } 
  },  
}

\pgfplotsset{
  GQF_LFStyle/.style     = {color = teal,       mark = triangle*},
  HT_ALFStyle/.style     = {color = orange,       mark = triangle*},
  HT_MLFStyle/.style     = {color = red,       mark = triangle*},
}

\pgfplotsset{
  QFNLStyle/.style     = {color = teal,       mark = square*},
  QFLStyle/.style     = {color = orange,       mark = triangle*},
  BFStyle/.style     = {color = red,       mark = diamond*},
  BF1BStyle/.style     = {color = violet,       mark = asterisk},
  SQFStyle/.style     = {color = cyan,       mark = pentagon*},
  RSQFStyle/.style     = {color = gray,       mark = otimes*}
}